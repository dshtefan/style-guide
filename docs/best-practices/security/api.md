---
sidebar_position: 3
---

# –ó–∞—â–∏—Ç–∞ API-—Ç–æ—á–µ–∫

–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å API ‚Äî –≤–∞–∂–Ω—ã–π –∞—Å–ø–µ–∫—Ç —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏. –•–æ—Ç—è –æ—Å–Ω–æ–≤–Ω–∞—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –∑–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å API –ª–µ–∂–∏—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä–Ω–æ–π —á–∞—Å—Ç–∏, frontend –º–æ–∂–µ—Ç –∏–≥—Ä–∞—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫—É—é —Ä–æ–ª—å –≤ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–∏ –∑–∞—â–∏—Ç—ã –¥–∞–Ω–Ω—ã—Ö. –ü–æ–Ω–∏–º–∞–Ω–∏–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å API-—Ç–æ—á–∫–∞–º–∏ —è–≤–ª—è–µ—Ç—Å—è –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–º –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π.

---

### –û—Å–Ω–æ–≤–Ω—ã–µ —É–≥—Ä–æ–∑—ã –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å API üîê

1. **–ü–µ—Ä–µ—Ö–≤–∞—Ç –¥–∞–Ω–Ω—ã—Ö (Man-in-the-Middle):** –ó–∞–ø—Ä–æ—Å—ã –∏–ª–∏ –æ—Ç–≤–µ—Ç—ã –º–æ–≥—É—Ç –±—ã—Ç—å –ø–µ—Ä–µ—Ö–≤–∞—á–µ–Ω—ã –∑–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫–∞–º–∏ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –ø–µ—Ä–µ–¥–∞—á–∏.
2. **–£—Ç–µ—á–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:** –•—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ –≤ –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, `localStorage`) –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –∫–æ–º–ø—Ä–æ–º–µ—Ç–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö.
3. **–ò–∑–±—ã—Ç–æ—á–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞:** –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ —Å —à–∏—Ä–æ–∫–∏–º–∏ –ø—Ä–∞–≤–∞–º–∏ –º–æ–∂–µ—Ç –æ—Ç–∫—Ä—ã–≤–∞—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Ä–µ—Å—É—Ä—Å–∞–º, –∫–æ—Ç–æ—Ä—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –¥–æ–ª–∂–µ–Ω –æ–±–ª–∞–¥–∞—Ç—å.
4. **–ò–Ω—ä–µ–∫—Ü–∏–∏:** –ù–∞–ø—Ä–∏–º–µ—Ä, –ø–µ—Ä–µ–¥–∞—á–∞ –≤—Ä–µ–¥–æ–Ω–æ—Å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ —Ç–µ–ª–µ –∑–∞–ø—Ä–æ—Å–∞.

---

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∑–∞—â–∏—Ç–µ API —Å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ üõ°Ô∏è


#### 1. –•—Ä–∞–Ω–∏—Ç–µ —Ç–æ–∫–µ–Ω—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ

–ß–∞—Å—Ç–æ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–∫–µ–Ω—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, JWT). Frontend-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–æ–ª–∂–Ω—ã –∑–Ω–∞—Ç—å, –≥–¥–µ —Ö—Ä–∞–Ω–∏—Ç—å —Ç–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ.

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ –º–µ—Å—Ç–æ:**  
- `HttpOnly Secure Cookies` (—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è —Å–µ—Ä–≤–µ—Ä–æ–º): —ç—Ç–æ —Å–∞–º—ã–π –±–µ–∑–æ–ø–∞—Å–Ω—ã–π —Å–ø–æ—Å–æ–±.

**–ù–µ—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ –º–µ—Å—Ç–æ:**  
- `localStorage`: —Ç–æ–∫–µ–Ω—ã –º–æ–≥—É—Ç –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã —Å –ø–æ–º–æ—â—å—é XSS-–∞—Ç–∞–∫–∏.
- `sessionStorage`: –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ `localStorage`, –Ω–æ —Ç–æ–∫–µ–Ω –ø—Ä–æ–ø–∞–¥–∞–µ—Ç –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã.

**–ü—Ä–∏–º–µ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ø–µ—Ä–µ–¥–∞—á–∏ —Ç–æ–∫–µ–Ω–æ–≤:**
```typescript
// –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ cookie –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —Å —Ç–∞–∫–∏–º–∏ –∞—Ç—Ä–∏–±—É—Ç–∞–º–∏:
res.cookie("ACCESS_TOKEN", "your_secure_token", {
  httpOnly: true,
  secure: true, // –¢–æ–ª—å–∫–æ –¥–ª—è HTTPS
  sameSite: "Strict", // –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ –¥–ª—è –º–µ–∂—Å–∞–π—Ç–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
});
```

–î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∑–∞—â–∏—â—ë–Ω–Ω—ã–º API –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–∫–µ–Ω –∏–∑ cookies (–Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ). –í–∞—à —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –Ω–µ –¥–æ–ª–∂–µ–Ω —è–≤–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —Ç–æ–∫–µ–Ω.

---

#### 2. –ú–∏–Ω–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –ø–µ—Ä–µ–¥–∞—á—É —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

–û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –¥–∞–Ω–Ω—ã–µ, –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º—ã–µ —á–µ—Ä–µ–∑ –∑–∞–ø—Ä–æ—Å—ã –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ–º—ã–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ. Frontend-–¥–æ–ª–∂–µ–Ω –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é, —á—Ç–æ–±—ã –º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤–æ–∑–º–æ–∂–Ω—ã–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏.

**–ü–ª–æ—Ö–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞:**
–û—Ç–ø—Ä–∞–≤–∫–∞ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö:
```typescript
const user = {
  id: 123,
  name: "John Doe",
  password: "mypassword123",
};

fetch("/api/user/data", {
  method: "POST",
  body: JSON.stringify(user),
});
```

**–•–æ—Ä–æ—à–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞:**
–û—Ç–ø—Ä–∞–≤–ª—è–π—Ç–µ —Ç–æ–ª—å–∫–æ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π –Ω–∞–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö:
```typescript
const user = {
  id: 123,
  name: "John Doe",
};

fetch("/api/user/data", {
  method: "POST",
  body: JSON.stringify(user),
});
```

---

#### 3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ CORS –ø—Ä–∞–≤–∏–ª—å–Ω–æ

CORS (Cross-Origin Resource Sharing) –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç, –æ—Ç–∫—É–¥–∞ –±—Ä–∞—É–∑–µ—Ä –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∑–∞–ø—Ä–æ—Å—ã. –•–æ—Ç—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è CORS ‚Äî –∑–∞–¥–∞—á–∞ —Å–µ—Ä–≤–µ—Ä–∞, —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º –≤–∞–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å, —á—Ç–æ –∑–∞–ø—Ä–æ—Å—ã –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º –ø—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏–µ–º (origin).

**–ü—Ä–∏–º–µ—Ä –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞–ø—Ä–æ—Å–∞:**
```typescript
const fetchData = async () => {
  const response = await fetch("https://api.example.com/data", {
    credentials: "include", // –ü–µ—Ä–µ–¥–∞—á–∞ cookies
    headers: {
      "Content-Type": "application/json",
    },
  });

  const data = await response.json();
  console.log(data);
};
```

---

#### 4. –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏—è

–î–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π —á–∞—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ, —á—Ç–æ –≤–≤–µ–¥—ë–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –¥–∞–Ω–Ω—ã–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –æ–∂–∏–¥–∞–Ω–∏—è–º.

**–ü–ª–æ—Ö–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞:**
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–µ–ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞ –≤ –∑–∞–ø—Ä–æ—Å–∞—Ö.
```typescript
const updateUser = async (userData: any) => {
  await fetch("/api/user/update", {
    method: "POST",
    body: JSON.stringify(userData), // –ë–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏
  });
};
```

---

#### 5. –û–±–Ω–æ–≤–ª—è–π—Ç–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

–ù–µ–±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∏–ª–∏ —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∑–∞–ø—Ä–æ—Å–∞–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —É—Å—Ç–∞—Ä–µ–≤—à–∏–π `axios`) –º–æ–≥—É—Ç —Å—Ç–∞—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫–æ–º —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π.

**–°–æ–≤–µ—Ç—ã:**
- –†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ `npm audit` –∏–ª–∏ `yarn audit`.
- –û–±–Ω–æ–≤–ª—è–π—Ç–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∫–ª–∏–µ–Ω—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, React, axios) —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –≤—ã—Ö–æ–¥–∞ –Ω–æ–≤—ã—Ö –º–∞–∂–æ—Ä–Ω—ã—Ö –≤–µ—Ä—Å–∏–π.

---

### –ü—Ä–∏–º–µ—Ä: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞—â–∏—â—ë–Ω–Ω–æ–≥–æ API-–≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è

–ù–∏–∂–µ –ø—Ä–∏–≤–µ–¥—ë–Ω –ø—Ä–∏–º–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π —É—á–∏—Ç—ã–≤–∞–µ—Ç –≤—Å–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:

```typescript
import DOMPurify from "dompurify";
import * as yup from "yup";

const apiUrl = "https://api.example.com";

const UserSchema = yup.object().shape({
  name: yup.string().required(),
  email: yup.string().email().required(),
});

const fetchWithCsrf = async (endpoint: string, data: any) => {
  const csrfToken = document.cookie
    .split("; ")
    .find((row) => row.startsWith("XSRF-TOKEN="))?.split("=")[1];
    
  const sanitizedData = {
    ...data,
    name: DOMPurify.sanitize(data.name), // –°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
  };

  return await fetch(`${apiUrl}${endpoint}`, {
    method: "POST",
    headers: {
      "Content-Type": "application/json",
      "X-CSRF-Token": csrfToken || "",
    },
    body: JSON.stringify(sanitizedData),
  });
};

const updateUser = async (userData: any) => {
  try {
    await UserSchema.validate(userData);
    const response = await fetchWithCsrf("/user/update", userData);
    const result = await response.json();
    console.log(result);
  } catch (error) {
    console.error("–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:", error);
  }
};
```

---

### –í—ã–≤–æ–¥—ã üìå
 
1. ‚úÖ –•—Ä–∞–Ω–∏—Ç–µ —Ç–æ–∫–µ–Ω—ã –≤ `HttpOnly Secure Cookies`.  
2. ‚úÖ –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–π—Ç–µ –æ–±—ä—ë–º –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö, —á—Ç–æ–±—ã —Å–Ω–∏–∑–∏—Ç—å —Ä–∏—Å–∫ —É—Ç–µ—á–µ–∫.  
3. ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥ –∑–∞–ø—Ä–æ—Å–∞–º–∏. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –≤—Ä–æ–¥–µ `yup` –∏–ª–∏ `zod`.  
4. ‚úÖ –ù–∞—Å—Ç—Ä–æ–π—Ç–µ CORS –∏ –¥–æ–ª–∂–Ω—ã–º –æ–±—Ä–∞–∑–æ–º –¥–æ–±–∞–≤–ª—è–π—Ç–µ `credentials` –≤ –∑–∞–ø—Ä–æ—Å—ã.  
5. ‚úÖ –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –Ω–∏–º–∏ —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π.  
